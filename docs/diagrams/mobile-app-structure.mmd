%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#0EA5E9'}}}%%

flowchart TB
    subgraph App["ğŸ“± JUFA Mobile App (Flutter)"]
        Main["main.dart"]
        
        subgraph Core["ğŸ”§ Core"]
            Network["Network Layer<br/>(Dio, Interceptors)"]
            Storage["Local Storage<br/>(Hive, SecureStorage)"]
            Constants["Constants"]
            Utils["Utils & Helpers"]
            Errors["Error Handling"]
        end

        subgraph Features["â­ Features (Clean Architecture)"]
            subgraph AuthFeature["ğŸ” Auth"]
                AuthData["data/"]
                AuthDomain["domain/"]
                AuthPresentation["presentation/"]
            end

            subgraph WalletFeature["ğŸ’° Wallet"]
                WalletData["data/"]
                WalletDomain["domain/"]
                WalletPresentation["presentation/"]
            end

            subgraph TxnFeature["ğŸ’¸ Transactions"]
                TxnData["data/"]
                TxnDomain["domain/"]
                TxnPresentation["presentation/"]
            end

            subgraph KYCFeature["ğŸ“‹ KYC"]
                KYCData["data/"]
                KYCDomain["domain/"]
                KYCPresentation["presentation/"]
            end

            subgraph AgentFeature["ğŸ‘¤ Agent"]
                AgentData["data/"]
                AgentDomain["domain/"]
                AgentPresentation["presentation/"]
            end

            subgraph MarketFeature["ğŸ›’ Marketplace"]
                MarketData["data/"]
                MarketDomain["domain/"]
                MarketPresentation["presentation/"]
            end

            subgraph ProfileFeature["âš™ï¸ Profile"]
                ProfileData["data/"]
                ProfileDomain["domain/"]
                ProfilePresentation["presentation/"]
            end
        end

        subgraph Shared["ğŸ“¦ Shared"]
            Widgets["Common Widgets"]
            Providers["Global Providers"]
            Theme["Theme & Styles"]
            Extensions["Extensions"]
        end

        subgraph Router["ğŸ§­ Navigation"]
            GoRouter["GoRouter"]
            Guards["Auth Guards"]
        end
    end

    Main --> Core
    Main --> Router
    Router --> Features
    Features --> Core
    Features --> Shared

    subgraph CleanArch["Clean Architecture Pattern"]
        direction LR
        DataLayer["ğŸ“Š Data Layer<br/>â€¢ Models (DTOs)<br/>â€¢ Datasources<br/>â€¢ Repository Impl"]
        DomainLayer["ğŸ¯ Domain Layer<br/>â€¢ Entities<br/>â€¢ Repository Interfaces<br/>â€¢ Use Cases"]
        PresentationLayer["ğŸ–¥ï¸ Presentation Layer<br/>â€¢ Screens<br/>â€¢ Widgets<br/>â€¢ Providers/Blocs"]
        
        DataLayer --> DomainLayer
        DomainLayer --> PresentationLayer
    end
